{
  "source": "Rust Reference",
  "source_repo": "https://github.com/rust-lang/reference",
  "extraction_date": "2026-01-03",
  "chapter": 21,
  "title": "The Rust runtime",
  "file": "runtime.md",
  "sections": [
    {
      "id": "runtime",
      "title": "The Rust runtime",
      "level": 1,
      "content": "This section documents features that define some aspects of the Rust runtime.\n\n<!-- template:attributes -->",
      "parent_id": null,
      "paragraphs": {
        "runtime": "This section documents features that define some aspects of the Rust runtime.\n\n<!-- template:attributes -->"
      }
    },
    {
      "id": "runtime.global_allocator",
      "title": "The `global_allocator` attribute",
      "level": 1,
      "content": "The *`global_allocator` attribute* selects a memory allocator.\n\n> [!EXAMPLE]\n> ```rust\n> use core::alloc::{GlobalAlloc, Layout};\n> use std::alloc::System;\n>\n> struct MyAllocator;\n>\n> unsafe impl GlobalAlloc for MyAllocator {\n>     unsafe fn alloc(&self, layout: Layout) -> *mut u8 {\n>         unsafe { System.alloc(layout) }\n>     }\n>     unsafe fn dealloc(&self, ptr: *mut u8, layout: Layout) {\n>         unsafe { System.dealloc(ptr, layout) }\n>     }\n> }\n>\n> #[global_allocator]\n> static GLOBAL: MyAllocator = MyAllocator;\n> ```\n\nThe `global_allocator` attribute uses the [MetaWord] syntax.\n\nThe `global_allocator` attribute may only be applied to a [static item] whose type implements the [`GlobalAlloc`] trait.\n\nThe `global_allocator` attribute may only be used once on an item.\n\nThe `global_allocator` attribute may only be used once in the crate graph.\n\nThe `global_allocator` attribute is exported from the standard library prelude.\n\n<!-- template:attributes -->",
      "parent_id": null,
      "paragraphs": {
        "runtime.global_allocator.intro": "The *`global_allocator` attribute* selects a memory allocator.\n\n> [!EXAMPLE]\n> ```rust\n> use core::alloc::{GlobalAlloc, Layout};\n> use std::alloc::System;\n>\n> struct MyAllocator;\n>\n> unsafe impl GlobalAlloc for MyAllocator {\n>     unsafe fn alloc(&self, layout: Layout) -> *mut u8 {\n>         unsafe { System.alloc(layout) }\n>     }\n>     unsafe fn dealloc(&self, ptr: *mut u8, layout: Layout) {\n>         unsafe { System.dealloc(ptr, layout) }\n>     }\n> }\n>\n> #[global_allocator]\n> static GLOBAL: MyAllocator = MyAllocator;\n> ```",
        "runtime.global_allocator.syntax": "The `global_allocator` attribute uses the [MetaWord] syntax.",
        "runtime.global_allocator.allowed-positions": "The `global_allocator` attribute may only be applied to a [static item] whose type implements the [`GlobalAlloc`] trait.",
        "runtime.global_allocator.duplicates": "The `global_allocator` attribute may only be used once on an item.",
        "runtime.global_allocator.single": "The `global_allocator` attribute may only be used once in the crate graph.",
        "runtime.global_allocator.stdlib": "The `global_allocator` attribute is exported from the standard library prelude.\n\n<!-- template:attributes -->"
      }
    },
    {
      "id": "runtime.windows_subsystem",
      "title": "The `windows_subsystem` attribute",
      "level": 2,
      "content": "The *`windows_subsystem` attribute* sets the [subsystem] when linking on a Windows target.\n\n> [!EXAMPLE]\n> ```rust\n> #![windows_subsystem = \"windows\"]\n> ```\n\nThe `windows_subsystem` attribute uses the [MetaNameValueStr] syntax. Accepted values are `\"console\"` and `\"windows\"`.\n\nThe `windows_subsystem` attribute may only be applied to the crate root.\n\nOnly the first use of `windows_subsystem` has effect.\n\n> [!NOTE]\n> `rustc` lints against any use following the first. This may become an error in the future.\n\nThe `windows_subsystem` attribute is ignored on non-Windows targets and non-`bin` [crate types].\n\nThe `\"console\"` subsystem is the default. If a console process is run from an existing console then it will be attached to that console; otherwise a new console window will be created.\n\nThe `\"windows\"` subsystem will run detached from any existing console.\n\n> [!NOTE]\n> The `\"windows\"` subsystem is commonly used by GUI applications that do not want to display a console window on startup.\n\n[`GlobalAlloc`]: alloc::alloc::GlobalAlloc\n[crate types]: linkage.md\n[static item]: items/static-items.md\n[subsystem]: https://msdn.microsoft.com/en-us/library/fcc1zstk.aspx",
      "parent_id": null,
      "paragraphs": {
        "runtime.windows_subsystem.intro": "The *`windows_subsystem` attribute* sets the [subsystem] when linking on a Windows target.\n\n> [!EXAMPLE]\n> ```rust\n> #![windows_subsystem = \"windows\"]\n> ```",
        "runtime.windows_subsystem.syntax": "The `windows_subsystem` attribute uses the [MetaNameValueStr] syntax. Accepted values are `\"console\"` and `\"windows\"`.",
        "runtime.windows_subsystem.allowed-positions": "The `windows_subsystem` attribute may only be applied to the crate root.",
        "runtime.windows_subsystem.duplicates": "Only the first use of `windows_subsystem` has effect.\n\n> [!NOTE]\n> `rustc` lints against any use following the first. This may become an error in the future.",
        "runtime.windows_subsystem.ignored": "The `windows_subsystem` attribute is ignored on non-Windows targets and non-`bin` [crate types].",
        "runtime.windows_subsystem.console": "The `\"console\"` subsystem is the default. If a console process is run from an existing console then it will be attached to that console; otherwise a new console window will be created.",
        "runtime.windows_subsystem.windows": "The `\"windows\"` subsystem will run detached from any existing console.\n\n> [!NOTE]\n> The `\"windows\"` subsystem is commonly used by GUI applications that do not want to display a console window on startup.\n\n[`GlobalAlloc`]: alloc::alloc::GlobalAlloc\n[crate types]: linkage.md\n[static item]: items/static-items.md\n[subsystem]: https://msdn.microsoft.com/en-us/library/fcc1zstk.aspx"
      }
    }
  ],
  "ids": [
    "runtime.windows_subsystem.ignored",
    "runtime.windows_subsystem.windows",
    "runtime.global_allocator.stdlib",
    "runtime.windows_subsystem",
    "runtime.global_allocator.allowed-positions",
    "runtime.global_allocator.single",
    "runtime.windows_subsystem.duplicates",
    "runtime",
    "runtime.windows_subsystem.console",
    "runtime.global_allocator.duplicates",
    "runtime.global_allocator.syntax",
    "runtime.windows_subsystem.intro",
    "runtime.global_allocator",
    "runtime.windows_subsystem.allowed-positions",
    "runtime.global_allocator.intro",
    "runtime.windows_subsystem.syntax"
  ]
}
